# Frontend Docker Configuration

## Обзор

Этот проект включает оптимизированную Docker-конфигурацию для React-приложения, которая обеспечивает безопасность, производительность и удобство развертывания.

## Структура файлов

- [`dockerfile`](./dockerfile) - Многоэтапный Dockerfile для сборки и развертывания
- [`nginx.conf`](./nginx.conf) - Конфигурация Nginx с оптимизациями
- [`.dockerignore`](./.dockerignore) - Файл исключений для оптимизации сборки
- [`build_and_run.sh`](./build_and_run.sh) - Скрипт для быстрой сборки и запуска

## Особенности конфигурации

### Dockerfile
- **Многоэтапная сборка**: Отделяет этап сборки от финального образа
- **Минимальный размер образа**: Использует nginx:alpine для продакшена
- **Безопасность**: Запускается от имени non-root пользователя
- **Кэширование зависимостей**: Оптимизирует время сборки

### Nginx конфигурация
- **Gzip-сжатие**: Уменьшает размер передаваемых данных
- **Кэширование статических ресурсов**: Улучшает производительность
- **Поддержка React Router**: Обеспечивает корректную работу маршрутизации
- **Заголовки безопасности**: Улучшает безопасность приложения
- **API прокси**: Позволяет обращаться к API через тот же домен

## Использование

### Быстрый запуск
```bash
# Использование готового скрипта
./Frontend/build_and_run.sh
```

### Ручной запуск
```bash
# Сборка и запуск всех сервисов
docker-compose up -d

# Только пересборка фронтенда
docker-compose up -d --build frontend
```

### Просмотр логов
```bash
# Просмотр логов фронтенда
docker-compose logs -f frontend

# Просмотр логов всех сервисов
docker-compose logs -f
```

### Остановка
```bash
# Остановка всех сервисов
docker-compose down

# Остановка и удаление образов
docker-compose down --rmi all
```

## Доступ к приложению

- **Frontend**: http://localhost:3000
- **API Gateway**: http://localhost:8080

## Переменные окружения

При необходимости можно добавить переменные окружения в docker-compose.yml:

```yaml
frontend:
  build:
    context: ./Frontend
    dockerfile: dockerfile
  environment:
    - REACT_APP_API_URL=http://localhost:8080
    - REACT_APP_ENV=production
```

## Оптимизации

1. **Размер образа**: ~25MB (вместо ~150MB для node-образа)
2. **Время загрузки**: Gzip-сжатие уменьшает размер передаваемых данных на 60-70%
3. **Безопасность**: Non-root пользователь и заголовки безопасности
4. **Производительность**: Кэширование статических ресурсов на 1 год

## Разработка

Для локальной разработки используйте стандартные команды npm:

```bash
# Установка зависимостей
npm install

# Запуск dev-сервера
npm start

# Сборка для продакшена
npm run build