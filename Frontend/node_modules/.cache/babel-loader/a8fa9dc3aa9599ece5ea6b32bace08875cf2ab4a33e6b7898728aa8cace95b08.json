{"ast":null,"code":"var _jsxFileName = \"/Users/cukw/FinalWork/Frontend/src/contexts/NotificationContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Create context for notifications\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NotificationContext = /*#__PURE__*/createContext();\nexport const NotificationProvider = ({\n  children\n}) => {\n  _s();\n  const [notificationState, setNotificationState] = useState({\n    notifications: [],\n    unreadCount: 0,\n    loading: false,\n    error: null\n  });\n\n  // Fetch notifications on mount and when authenticated\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      fetchNotifications();\n    }\n  }, []);\n  const fetchNotifications = async () => {\n    try {\n      setNotificationState(prev => ({\n        ...prev,\n        loading: true,\n        error: null\n      }));\n      const response = await axios.get('/api/notifications', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.success) {\n        setNotificationState({\n          notifications: response.data.notifications || [],\n          unreadCount: response.data.unreadCount || 0,\n          loading: false,\n          error: null\n        });\n      } else {\n        setNotificationState({\n          notifications: [],\n          unreadCount: 0,\n          loading: false,\n          error: response.data.message || 'Failed to fetch notifications'\n        });\n      }\n    } catch (error) {\n      setNotificationState({\n        notifications: [],\n        unreadCount: 0,\n        loading: false,\n        error: error.message || 'An error occurred while fetching notifications'\n      });\n    }\n  };\n  const markAsRead = async notificationId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.put(`/api/notifications/${notificationId}/read`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.success) {\n        setNotificationState(prev => ({\n          ...prev,\n          notifications: prev.notifications.map(n => n.id === notificationId ? {\n            ...n,\n            is_read: true\n          } : n),\n          unreadCount: Math.max(0, prev.unreadCount - 1)\n        }));\n      }\n    } catch (error) {\n      setNotificationState(prev => ({\n        ...prev,\n        error: error.message || 'Failed to mark notification as read'\n      }));\n    }\n  };\n  const markAllAsRead = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.put('/api/notifications/read-all', {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.data.success) {\n        setNotificationState(prev => ({\n          ...prev,\n          notifications: prev.notifications.map(n => ({\n            ...n,\n            is_read: true\n          })),\n          unreadCount: 0\n        }));\n      }\n    } catch (error) {\n      setNotificationState(prev => ({\n        ...prev,\n        error: error.message || 'Failed to mark all notifications as read'\n      }));\n    }\n  };\n  const value = {\n    notificationState,\n    fetchNotifications,\n    markAsRead,\n    markAllAsRead\n  };\n  return /*#__PURE__*/_jsxDEV(NotificationContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n_s(NotificationProvider, \"JSleOMkGSXrinJzbaZ9WoleK7cc=\");\n_c = NotificationProvider;\nexport const useNotifications = () => {\n  _s2();\n  const context = useContext(NotificationContext);\n  if (!context) {\n    throw new Error('useNotifications must be used within a NotificationProvider');\n  }\n  return context;\n};\n_s2(useNotifications, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"NotificationProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsxDEV","_jsxDEV","NotificationContext","NotificationProvider","children","_s","notificationState","setNotificationState","notifications","unreadCount","loading","error","token","localStorage","getItem","fetchNotifications","prev","response","get","headers","Authorization","data","success","message","markAsRead","notificationId","put","map","n","id","is_read","Math","max","markAllAsRead","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useNotifications","_s2","context","Error","$RefreshReg$"],"sources":["/Users/cukw/FinalWork/Frontend/src/contexts/NotificationContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Create context for notifications\nconst NotificationContext = createContext();\n\nexport const NotificationProvider = ({ children }) => {\n  const [notificationState, setNotificationState] = useState({\n    notifications: [],\n    unreadCount: 0,\n    loading: false,\n    error: null\n  });\n\n  // Fetch notifications on mount and when authenticated\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      fetchNotifications();\n    }\n  }, []);\n\n  const fetchNotifications = async () => {\n    try {\n      setNotificationState(prev => ({ ...prev, loading: true, error: null }));\n      \n      const response = await axios.get('/api/notifications', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      \n      if (response.data.success) {\n        setNotificationState({\n          notifications: response.data.notifications || [],\n          unreadCount: response.data.unreadCount || 0,\n          loading: false,\n          error: null\n        });\n      } else {\n        setNotificationState({\n          notifications: [],\n          unreadCount: 0,\n          loading: false,\n          error: response.data.message || 'Failed to fetch notifications'\n        });\n      }\n    } catch (error) {\n      setNotificationState({\n        notifications: [],\n        unreadCount: 0,\n        loading: false,\n        error: error.message || 'An error occurred while fetching notifications'\n      });\n    }\n  };\n\n  const markAsRead = async (notificationId) => {\n    try {\n      const token = localStorage.getItem('token');\n      \n      const response = await axios.put(`/api/notifications/${notificationId}/read`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      \n      if (response.data.success) {\n        setNotificationState(prev => ({\n          ...prev,\n          notifications: prev.notifications.map(n => \n            n.id === notificationId ? { ...n, is_read: true } : n\n          ),\n          unreadCount: Math.max(0, prev.unreadCount - 1)\n        }));\n      }\n    } catch (error) {\n      setNotificationState(prev => ({\n        ...prev,\n        error: error.message || 'Failed to mark notification as read'\n      }));\n    }\n  };\n\n  const markAllAsRead = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      \n      const response = await axios.put('/api/notifications/read-all', {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      \n      if (response.data.success) {\n        setNotificationState(prev => ({\n          ...prev,\n          notifications: prev.notifications.map(n => ({ ...n, is_read: true })),\n          unreadCount: 0\n        }));\n      }\n    } catch (error) {\n      setNotificationState(prev => ({\n        ...prev,\n        error: error.message || 'Failed to mark all notifications as read'\n      }));\n    }\n  };\n\n  const value = { \n    notificationState, \n    fetchNotifications, \n    markAsRead, \n    markAllAsRead \n  };\n\n  return (\n    <NotificationContext.Provider value={value}>\n      {children}\n    </NotificationContext.Provider>\n  );\n};\n\nexport const useNotifications = () => {\n  const context = useContext(NotificationContext);\n  if (!context) {\n    throw new Error('useNotifications must be used within a NotificationProvider');\n  }\n  return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}